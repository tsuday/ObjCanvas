<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Sample Application for ObjCanvas.js</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				background-color: #fff;
				margin: 0px;
				overflow: hidden;
			}
		</style>
		<script src="lib/three_js/build/three.js"></script>
		<script src="lib/three_js/examples/js/loaders/OBJLoader.js"></script>
		<script src="lib/three_js/examples/js/controls/OrbitControls.js"></script>
		<script src="lib/FileSaver_js/FileSaver.min.js"></script>
		<script src="lib/canvas-toBlob_js/canvas-toBlob.js"></script>
		<script src="js/ObjCanvas.js"></script>
		<script>
			var OBJ_PATH = 'data/Cube.obj';

			window.onload = function () {
				// DIV as a container for drawing canvas
				var containerScene = document.getElementById( 'containerScene' );
				var containerDepthMap = document.getElementById( 'containerDepthMap' );

				var canvasScene = new ObjCanvas(containerScene);
				var canvasDepthMap = new ObjCanvas(containerDepthMap);

				canvasScene.loadObjFile(OBJ_PATH, {});
				canvasDepthMap.loadObjFile(OBJ_PATH, {"bDepthMap":true});

				canvasScene.animate();
				canvasDepthMap.animate();

				document.onkeydown = function (e){
					if(!e) e = window.event; // legacy

					var key = e.keyCode;
					if (key == 83) { // 's' key
						canvasScene.save();
						canvasDepthMap.save();
					}

					if (key == 65) { // 'a' key
						var arDistRatio = [
							1.0,
							1.5,
							2.5,
							4.0,
						];
						for (var i=0;i<arDistRatio.length;i++) {
							var distRatio = arDistRatio[i];
							canvasScene.autoSave(distRatio);
							canvasDepthMap.autoSave(distRatio);
						}
					}
				};
			};
		</script>
	</head>

	<body>
		<h1>Sample Application for ObjCanvas.js</h1>
		<div />
		<div id="c" style="display:table">
			<div id="containerScene" style="display:table-cell;width:512px;height:512px;border:solid 10px #ff0000"></div>
			<div class="space" style="display:table-cell;width:64px;"></div>
			<div id="containerDepthMap" style="display:table-cell;width:512px;height:512px;border:solid 10px #ff0000"></div>
		</div>
		
		<ul>
			<li>This application load <i>Cube.obj</i> and draw in two canvases above.</li>
			<ul>
				<li>Left : An object is rendered as 3D-object. To make it easy to recognize, faces are drawn in green color.</li>
				<li>Right: An object is rendered as Depth Map.</li>
			</ul>
			<li>You can rotate objects shown on canvas.</li>
			<li>Pressing 's' key, objects shown on both sides are saved as png file. Only contours without green color are saved for left canvas.</li>
			<li>Pressing 'a' key, view points are automatically changed and saved as png file. Please note that in default sample implementation, distance between viewpoints and objects also changed and more than one hundred images are saved.</li>
		</ul>
		
	</body>
</html